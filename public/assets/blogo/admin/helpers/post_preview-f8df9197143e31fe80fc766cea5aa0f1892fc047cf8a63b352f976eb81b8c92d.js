(function(){var e;e=function(){function e(e,t,n,i){this.buttonId=e,this.formId=t,this.postUrl=n,this.modalId=i,this.button=$("#"+this.buttonId),this.form=$("#"+this.formId),this.modal=$("#"+this.modalId),this.iframe=this.modal.find("iframe")}return e.prototype.init=function(){var e,t;return t=this.postUrl,e=this.previewPost,this.button.on("click",function(e){return function(n){return e.updateCKeditor(),n.preventDefault(),$.ajax({type:"POST",url:t,data:e.form.serialize(),success:function(t){return e.previewPost(t)}})}}(this))},e.prototype.previewPost=function(e){return this.iframe.contents().find("html").html(e),document.location.hash=this.modalId},e.prototype.updateCKeditor=function(){var e,t,n,i;if("undefined"!=typeof CKEDITOR&&null!==CKEDITOR){n=CKEDITOR.instances,i=[];for(t in n)e=n[t],i.push(e.updateElement());return i}},e}(),window.PostPreview=e}).call(this);