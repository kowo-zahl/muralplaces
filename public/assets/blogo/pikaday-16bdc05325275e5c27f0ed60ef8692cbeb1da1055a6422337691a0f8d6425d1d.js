/*!
 * Pikaday
 *
 * Copyright Â© 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 */
!function(e,t){"use strict";var a;if("object"==typeof exports){try{a=require("moment")}catch(n){}module.exports=t(a)}else"function"==typeof define&&define.amd?define(function(e){var n="moment";return a=e.defined&&e.defined(n)?e(n):void 0,t(a)}):e.Pikaday=t(e.moment)}(this,function(e){"use strict";var t="function"==typeof e,a=!!window.addEventListener,n=window.document,i=window.setTimeout,o=function(e,t,n,i){a?e.addEventListener(t,n,!!i):e.attachEvent("on"+t,n)},r=function(e,t,n,i){a?e.removeEventListener(t,n,!!i):e.detachEvent("on"+t,n)},l=function(e,t,a){var i;n.createEvent?(i=n.createEvent("HTMLEvents"),i.initEvent(t,!0,!1),i=v(i,a),e.dispatchEvent(i)):n.createEventObject&&(i=n.createEventObject(),i=v(i,a),e.fireEvent("on"+t,i))},s=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},d=function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},c=function(e,t){d(e,t)||(e.className=""===e.className?t:e.className+" "+t)},u=function(e,t){e.className=s((" "+e.className+" ").replace(" "+t+" "," "))},m=function(e){return/Array/.test(Object.prototype.toString.call(e))},p=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},h=function(e){return e%4===0&&e%100!==0||e%400===0},g=function(e,t){return[31,h(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},f=function(e){p(e)&&e.setHours(0,0,0,0)},b=function(e,t){return e.getTime()===t.getTime()},v=function(e,t,a){var n,i;for(n in t)i=void 0!==e[n],i&&"object"==typeof t[n]&&void 0===t[n].nodeName?p(t[n])?a&&(e[n]=new Date(t[n].getTime())):m(t[n])?a&&(e[n]=t[n].slice(0)):e[n]=v({},t[n],a):(a||!i)&&(e[n]=t[n]);return e},T={field:null,bound:void 0,position:"bottom left",format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,numberOfMonths:1,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},onSelect:null,onOpen:null,onClose:null,onDraw:null},E=function(e,t,a){for(t+=e.firstDay;t>=7;)t-=7;return a?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},k=function(e,t,a,n,i){if(i)return'<td class="is-empty"></td>';var o=[];return n&&o.push("is-disabled"),a&&o.push("is-today"),t&&o.push("is-selected"),'<td data-day="'+e+'" class="'+o.join(" ")+'"><button class="pika-button" type="button">'+e+"</button></td>"},C=function(e,t){return"<tr>"+(t?e.reverse():e).join("")+"</tr>"},y=function(e){return"<tbody>"+e.join("")+"</tbody>"},I=function(e){var t,a=[];for(t=0;7>t;t++)a.push('<th scope="col"><abbr title="'+E(e,t)+'">'+E(e,t,!0)+"</abbr></th>");return"<thead>"+(e.isRTL?a.reverse():a).join("")+"</thead>"},R=function(e){var t,a,n,i,o,r=e._o,l=e._m,s=e._y,d=s===r.minYear,c=s===r.maxYear,u='<div class="pika-title">',p=!0,h=!0;for(n=[],t=0;12>t;t++)n.push('<option value="'+t+'"'+(t===l?" selected":"")+(d&&t<r.minMonth||c&&t>r.maxMonth?"disabled":"")+">"+r.i18n.months[t]+"</option>");for(i='<div class="pika-label">'+r.i18n.months[l]+'<select class="pika-select pika-select-month">'+n.join("")+"</select></div>",m(r.yearRange)?(t=r.yearRange[0],a=r.yearRange[1]+1):(t=s-r.yearRange,a=1+s+r.yearRange),n=[];a>t&&t<=r.maxYear;t++)t>=r.minYear&&n.push('<option value="'+t+'"'+(t===s?" selected":"")+">"+t+"</option>");return o='<div class="pika-label">'+s+r.yearSuffix+'<select class="pika-select pika-select-year">'+n.join("")+"</select></div>",u+=r.showMonthAfterYear?o+i:i+o,d&&(0===l||r.minMonth>=l)&&(p=!1),c&&(11===l||r.maxMonth<=l)&&(h=!1),u+='<button class="pika-prev'+(p?"":" is-disabled")+'" type="button">'+r.i18n.previousMonth+"</button>",u+='<button class="pika-next'+(h?"":" is-disabled")+'" type="button">'+r.i18n.nextMonth+"</button>",u+="</div>"},D=function(e,t){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+I(e)+y(t)+"</table>"},O=function(r){var l=this,s=l.config(r);l._onMouseDown=function(e){if(l._v){e=e||window.event;var t=e.target||e.srcElement;if(t){if(!d(t,"is-disabled")){if(d(t,"pika-button")&&!d(t,"is-empty"))return l.setDate(new Date(l._y,l._m,parseInt(t.innerHTML,10))),void(s.bound&&i(function(){l.hide()},100));d(t,"pika-prev")?l.prevMonth():d(t,"pika-next")&&l.nextMonth()}if(d(t,"pika-select"))l._c=!0;else{if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}}},l._onChange=function(e){e=e||window.event;var t=e.target||e.srcElement;t&&(d(t,"pika-select-month")?l.gotoMonth(t.value):d(t,"pika-select-year")&&l.gotoYear(t.value))},l._onInputChange=function(a){var n;a.firedBy!==l&&(t?(n=e(s.field.value,s.format),n=n&&n.isValid()?n.toDate():null):n=new Date(Date.parse(s.field.value)),l.setDate(p(n)?n:null),l._v||l.show())},l._onInputFocus=function(){l.show()},l._onInputClick=function(){l.show()},l._onInputBlur=function(){l._c||(l._b=i(function(){l.hide()},50)),l._c=!1},l._onClick=function(e){e=e||window.event;var t=e.target||e.srcElement,n=t;if(t){!a&&d(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),o(t,"change",l._onChange)));do if(d(n,"pika-single"))return;while(n=n.parentNode);l._v&&t!==s.trigger&&l.hide()}},l.el=n.createElement("div"),l.el.className="pika-single"+(s.isRTL?" is-rtl":""),o(l.el,"mousedown",l._onMouseDown,!0),o(l.el,"change",l._onChange),s.field&&(s.bound?n.body.appendChild(l.el):s.field.parentNode.insertBefore(l.el,s.field.nextSibling),o(s.field,"change",l._onInputChange),s.defaultDate||(t&&s.field.value?s.defaultDate=e(s.field.value,s.format).toDate():s.defaultDate=new Date(Date.parse(s.field.value)),s.setDefaultDate=!0));var c=s.defaultDate;p(c)?s.setDefaultDate?l.setDate(c,!0):l.gotoDate(c):l.gotoDate(new Date),s.bound?(this.hide(),l.el.className+=" is-bound",o(s.trigger,"click",l._onInputClick),o(s.trigger,"focus",l._onInputFocus),o(s.trigger,"blur",l._onInputBlur)):this.show()};return O.prototype={config:function(e){this._o||(this._o=v({},T,!0));var t=v(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field;var a=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=a>4?4:a,p(t.minDate)||(t.minDate=!1),p(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&(f(t.minDate),t.minYear=t.minDate.getFullYear(),t.minMonth=t.minDate.getMonth()),t.maxDate&&(f(t.maxDate),t.maxYear=t.maxDate.getFullYear(),t.maxMonth=t.maxDate.getMonth()),m(t.yearRange)){var n=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||n,t.yearRange[1]=parseInt(t.yearRange[1],10)||n}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||T.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(a){return p(this._d)?t?e(this._d).format(a||this._o.format):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(a,n){t&&e.isMoment(a)&&this.setDate(a.toDate(),n)},getDate:function(){return p(this._d)?new Date(this._d.getTime()):null},setDate:function(e,t){if(!e)return this._d=null,this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),p(e)){var a=this._o.minDate,n=this._o.maxDate;p(a)&&a>e?e=a:p(n)&&e>n&&(e=n),this._d=new Date(e.getTime()),f(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),l(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(e){p(e)&&(this._y=e.getFullYear(),this._m=e.getMonth(),this.draw())},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e=parseInt(e,10))||(this._m=0>e?0:e>11?11:e,this.draw())},nextMonth:function(){++this._m>11&&(this._m=0,this._y++),this.draw()},prevMonth:function(){--this._m<0&&(this._m=11,this._y--),this.draw()},gotoYear:function(e){isNaN(e)||(this._y=parseInt(e,10),this.draw())},setMinDate:function(e){this._o.minDate=e},setMaxDate:function(e){this._o.maxDate=e},draw:function(e){if(this._v||e){var t=this._o,a=t.minYear,n=t.maxYear,o=t.minMonth,r=t.maxMonth;if(this._y<=a&&(this._y=a,!isNaN(o)&&this._m<o&&(this._m=o)),this._y>=n&&(this._y=n,!isNaN(r)&&this._m>r&&(this._m=r)),this.el.innerHTML=R(this)+this.render(this._y,this._m),t.bound&&(this.adjustPosition(),"hidden"!==t.field.type&&i(function(){t.trigger.focus()},1)),"function"==typeof this._o.onDraw){var l=this;i(function(){l._o.onDraw.call(l)},0)}}},adjustPosition:function(){var e,t,a,i=this._o.trigger,o=i,r=this.el.offsetWidth,l=this.el.offsetHeight,s=window.innerWidth||n.documentElement.clientWidth,d=window.innerHeight||n.documentElement.clientHeight,c=window.pageYOffset||n.body.scrollTop||n.documentElement.scrollTop;if("function"==typeof i.getBoundingClientRect)a=i.getBoundingClientRect(),e=a.left+window.pageXOffset,t=a.bottom+window.pageYOffset;else for(e=o.offsetLeft,t=o.offsetTop+o.offsetHeight;o=o.offsetParent;)e+=o.offsetLeft,t+=o.offsetTop;(e+r>s||this._o.position.indexOf("right")>-1&&e-r+i.offsetWidth>0)&&(e=e-r+i.offsetWidth),(t+l>d+c||this._o.position.indexOf("top")>-1&&t-l-i.offsetHeight>0)&&(t=t-l-i.offsetHeight),this.el.style.cssText=["position: absolute","left: "+e+"px","top: "+t+"px"].join(";")},render:function(e,t){var a=this._o,n=new Date,i=g(e,t),o=new Date(e,t,1).getDay(),r=[],l=[];f(n),a.firstDay>0&&(o-=a.firstDay,0>o&&(o+=7));for(var s=i+o,d=s;d>7;)d-=7;s+=7-d;for(var c=0,u=0;s>c;c++){var m=new Date(e,t,1+(c-o)),h=a.minDate&&m<a.minDate||a.maxDate&&m>a.maxDate,v=p(this._d)?b(m,this._d):!1,T=b(m,n),E=o>c||c>=i+o;l.push(k(1+(c-o),v,T,h,E)),7===++u&&(r.push(C(l,a.isRTL)),l=[],u=0)}return D(a,r)},isVisible:function(){return this._v},show:function(){this._v||(this._o.bound&&o(n,"click",this._onClick),u(this.el,"is-hidden"),this._v=!0,this.draw(),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var e=this._v;e!==!1&&(this._o.bound&&r(n,"click",this._onClick),this.el.style.cssText="",c(this.el,"is-hidden"),this._v=!1,void 0!==e&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),r(this.el,"mousedown",this._onMouseDown,!0),r(this.el,"change",this._onChange),this._o.field&&(r(this._o.field,"change",this._onInputChange),this._o.bound&&(r(this._o.trigger,"click",this._onInputClick),r(this._o.trigger,"focus",this._onInputFocus),r(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},O});